<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lobster">
    <script src="{{ url_for('static',filename='jquery.js') }}"></script>
    <script src="{{ url_for('static',filename='inspect_element_disabler.js') }}"></script>
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/major.css') }}">
    {% block head %}{% endblock %}
    {% if (cur_posts[-1]+'_choice') in session %}
        <style>#jump_to_review{display:block;}</style>
    {% else %}
        <style>#jump_to_review{display:none;}</style>
    {% endif %}
    </head>
    <body>
        {% block body %}
        {% endblock %}
    </body>
    <script>
        var is_clicked = false;
        var submitted = false;
        var clicked_obj;
        var prev_vote;
        var bg = "#161616";
        var box = "#212121";
        
        //This part of the code is the animation for the next page button
        $(document).ready(function(){
            $('#btn').click(function(){
              if (clicked_obj){
              $('#post').hide('slow');
              $('#btn').html('NEXT PAGE');
              $('#btn').fadeOut('slow',function(){
                $('#next_page_btn').fadeIn('slow');
              });
              }
            })
          });
        
        //This changes the value of the dummy element and updates the background color of the div element
        function single_click(the_obj){
          if (submitted == false){
            if (is_clicked == false){
                the_obj.style.backgroundColor = bg;
                is_clicked = true;
                clicked_obj = the_obj;
            } else {
              clicked_obj.style.backgroundColor = box;
              clicked_obj = the_obj;
              the_obj.style.backgroundColor = bg;
            }
          }
        }
        function color(){
          if (prev_vote){
            prev_vote.style
            prev_vote.style.backgroundColor=box;
          }
        }
        //This function changes the value of the dummy element
        function btn_click(){
          var selected_candidate = clicked_obj.firstChild.nextSibling.nextSibling.nextSibling.textContent;
          document.getElementById('hidden').value = selected_candidate;
          submitted = true;
        }
        //This function gets the value of the voted element and then colors the same
        function load(){
          voted = document.getElementById("lehidden").innerHTML;
          $("#container").children().each(function () {
                    var element = $(this).children("p").prop("innerHTML");
                    if (element == voted){
                      $(this).css("background-color", bg);
                      prev_vote = $(this).get(0);
                      clicked_obj = prev_vote;
                    }
                });
        }
        //When the document gets loaded it calls the load function
        $(document).ready(function(){
          load();
        });
    </script>
    </html>